# 스코프 scope

## 📌 스코프 scope

- 영어 뜻은 ‘범위’
- 컴퓨터 공학, JS에서의 스코프 = 변수의 유효 범위
- 좀 더 정확하게 말하면, **변수의 접근 규칙에 따른 유효 범위**
- 쉽게 생각하면 **‘접근해서 가져다 쓸 수 있는가?’의 범위**

### 🧩 변수 접근 규칙

1. 안쪽 스코프에서 바깥쪽 스코프로는 접근할 수 있지만, 반대는 불가능하다.
    
    ✅ 접근 가능 : 안쪽 스코프  → 바깥쪽 스코프 변수
    
    ❌ 접근 불가 : 바깥쪽 스코프 → 안쪽 스코프 변수
    
2. 스코프는 중첩이 가능하다.
    - 전역 스코프(global scope) : 가장 바깥쪽의 스코프
    - 지역 스코프(local scope) : 전역이 아닌 다른 스코프
    - 전역 변수 : 전역 스코프에서 선언한 변수
    - 지역 변수 : 지역 스코프에서 선언한 변수
3. 지역 변수는 (자신의 스코프 안에서) 전역 변수보다 더 높은 우선순위를 가진다.
    
    ```javascript
    let name = 'nuuco';   //전역 변수
    
    function showName(){
    	let name = 'lee';   //지역 변수
    	console.log(name);
    }
    
    showName();  //'lee' <- 지역 변수가 나옴.
    ```
    

<aside>
✅ 변수 접근 규칙에 따라, 스코프를 벗어나서 변수에 접근할 수 없는 경우 에러가 난다.

= ReferenceError = 참조 에러, 접근할 수 없다는 뜻

</aside>

## 📌 스코프의 종류

### 🧩 블록 스코프(Block scope)

- 중괄호{ } 로 둘러싼 범위 - ex) 함수, if문, for 문
- 함수 스코프도 블록 스코프에 속한다.
- 블록 스코프 ⊃ 함수 스코프

### 🧩 함수 스코프(function scope)

- function 키워드를 사용해 함수로 둘러싼 범위
- ⚠️ 주의!) 화살표 함수는 **‘블록 스코프'로 취급**된다. 함수 스코프 아님!

## 📌 var, let, const

![image](https://user-images.githubusercontent.com/89282099/170867515-c7435b74-622c-40be-b832-b274136369c4.png)

### 🧩 var

- var 로 선언된 변수는 **함수 스코프**
- 블록 스코프는 무시한다.
    
    → 단! 화살표 함수의 블록 스코프는 무시하지 않는다.
    
    → 함수가 아닌 **블록{} 안에서 사용된 var** 는 **전역 변수**가 된다.
    
- var 선언은 함수 스코프 최상단에 선언된다. 선언만. (호이스팅)
- 선언 키워드(var, let, const) 없이 변수를 할당하지 말자.
    
    → 선언 없이 변수를 할당하면, 해당 변수는 var로 선언한 전역 변수처럼 취급된다.
    

<aside>
✅ **호이스팅?**

- 스코프 내부 어디서든 변수 **선언**은 **그 스코프 최상위에 선언된 것처럼 행동**한다.
- 호이스팅은 스코프 단위로 일어난다.
- var로 선언된 변수&함수, 함수 선언식에서 호이스팅을 주의해야한다.
- 선언부만 끌어올려 진다.
- 엄밀히 따지면 var 뿐만 아니라, let과 const 도 호이스팅이 되지만 TDZ(temporal dead zone) 영향으로  사용할 수 없게 되는 것이다. → 참고자료 보기

> 참고자료   
> [코딩앙마 변수, 호이스팅, TDZ 강의](https://youtu.be/ocGc-AmWSnQ)
   

</aside>

### 🧩 let

- let 으로 선언된 변수는 **블록 스코프**
- let 키워드 사용 권장!
    
    wyy? 블록 스코프라 시각적으로 스코프 구분이 쉽고, 재선언이 불가하여 버그를 줄일 수 있다.
    
- var 키워드보다 let 키워드가 더 안전하다!
    
    → var 키워드는 재선언을 해도 아무런 에러가 나지 않지만, let 키워드는 에러가 나서 재선언을 방지한다.

    → let 변수 재선언시 나는 에러 = ‘varName’ has already been declared.
    
    → 실제 코딩 시 재선언할 일은 없다. 그러니 재선언 실수를 막기위해 let 키워드를 쓰자.
    

### 🧩 const

- const 로 선언되는 변수는 **블록 스코프**
- 값이 변하지 않는 **상수(constant)**를 정의할 때 사용.
    
    → 값의 변경을 최소화하여 보다 안전한 프로그램을 만들 수 있다.
    
    → 값을 새롭게 할당할 일이 없다면 const 키워드 사용이 권장된다.
    
- 값을 재할당하면 에러가 난다.
    
    → TypeError: Assignment to constant variable 
    

## 📌 변수 선언에서 주의할 점

### 🧩 1. window 객체(브라우저 only)

- 브라우저 창(window)을 의미하는 객체
- 그러나 브라우저 창과 관계없이 **전역 영역**을 담고있다.
- var 로 선언된 전역 변수&함수, 함수 선언식으로 선언한 전역 함수가 window 객체에 속하게 된다.

### 🧩 2. 전역 변수는 최소화하세요

- 전역 변수 : 어디서든 접근 가능한 변수
- 전역 변수로 너무 많은 변수를 선언하지 말자!
    
    → 편리한 대신, 다른 함수 or 로직에 의도되지 않은 변경이 발생할 수 있음 = 부수 효과(side effect)
    
    → 부수 효과(side effect) 를 줄이기 위해서 전역 변수는 최소화 하는 게 좋다.
    

### 🧩 3. let, const 를 주로 사용하자

- var 는 블록 스코프를 무시하며, 재선언해도 에러를 내지 않는다.
    
    같은 스코프에서 동일한 이름의 변수를 재선언하는 것은 버그를 유발한다.
    
- 전역 변수를 var 로 선언하는 경우 문제가 될 수 있다.
    
    → var 로 선언하는 전역 변수가 window의 기능을 덮어씌워서, 내장 기능을 사용할 수 없게 만들 수 있다.
    
    ```javascript
    var console = 'hi!'
    
    window.console;  //'hi!'
    console.log('hello');   //에러! console.log is not a function.
    ```
    

### 🧩 4. 선언 없는 변수 할당 금지

- 선언 키워드(var, let, const) 없이 변수를 만들지 말자.
    
    ```javascript
    //선언 없는 변수와 변수 할당
    name;   //배드~
    age = 13;   //배드~
    ```
    
- 선언 없이 변수를 할당하면, 해당 변수는 var로 선언한 전역 변수처럼 취급된다.
- 이 실수 예방을 위해 **Strict Mode** 를 사용할 수 있다.
    
    → strict mode 에서 선언 키워드 없는 변수 할당은 Error 로 판단!
    

<aside>
✅ **Strict Mode?**

- 브라우저가 보다 엄격하게 작동되도록 만든다.
- 사용법 : js 파일 상단에 ‘user strict’; 를 작성한다.(따옴표 포함)
    ```jsx
    'use strict';    //엄격 모드 작동

    ...
    ```
</aside>